<!DOCTYPE html>
<html lang="en">
<head>
	<title>Ribbon theme for Shower</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=792, user-scalable=no">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<link rel="stylesheet" href="styles/screen.css">
	<link rel="stylesheet" href="//cdn.jsdelivr.net/highlight.js/8.9.1/styles/default.min.css">
	<link rel="stylesheet" href="styles/custom.css">
	<link rel="stylesheet" href="styles/github.css">
</head>
<body class="list">
<header class="caption">
	<h1>Developing postcss plugin</h1>
	<p><a href="https://github.com/cakeinpanic">Katerina Tort</a>, Devexperts</p>
</header>
<section class="slide slide-start">
	<div>
		<h1>Developing postcss plugin</h1>
		<div class="tweet">
		<blockquote class="twitter-tweet" lang="ru"><p lang="ru" dir="ltr">Даже если ночью в шкафу завернуться в одеяло и шепнуть «пост-цсс», то с верхней полки всё равно высунется Ситник и скажет, что есть плагин.</p>&mdash; Вадим Макеев (@pepelsbey) <a href="https://twitter.com/pepelsbey/status/663131603342893056">7 ноября 2015</a></blockquote>
		<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
		</div>
	</div>
</section>
<section class="slide">
	<div>
		<h2>Что может делать плагин?</h2>
		<ul>
			<li>Изменять css(подавляющее большинство, cssnext)</li>
			<li>Изменять другие файлы(postcss-assets-rebase)</li>
			<li>просто осмотреться(postcss-bem-linter, postcss-regexp-detect)</li>
		</ul>
		<img src="images/plugin.png">
	</div>
</section>
<section class="slide">
	<div>
		<h2>AST - абстрактное синтаксическое дерево</h2>

		<blockquote>
			Possible values are root, atrule, rule, decl, or comment.
		</blockquote>
		<img src="images/ast.png">
	</div>
</section>

<section class="slide slide-code">
	<div>
		<h2>AST - абстрактное синтаксическое дерево</h2>

		<pre class="before">
			<code class="css">
				html, body.home {
					margin: 10px 20px;
				}
			</code>
		</pre>
		<pre class="after">
			<code class="js">
				{
					type: 'root',
					nodes: [
						{
							type: 'rule',
							selectors: 'html, body.home',
							nodes: [{
								type: 'decl',
								prop: 'margin',
								value: '10px 20px'
							}]
						}
					]
				};
			</code>
		</pre>
	</div>
</section>

<section class="slide  slide-code">
	<div>
		<h2>postcss plugin boilerplate</h2>
		<pre>
			<code class="js">
				var postcss = require('postcss');

				module.exports = postcss.plugin('PLUGIN_NAME', function (opts) {
					opts = opts || {};
					// Work with options here
					return function (css, result) {
					// Transform CSS AST here
					};
				});
			</code>
		</pre>
	</div>
</section>


<section class="slide  slide-code">
	<div>
		<h2>Самый бесполезный плагин в мире</h2>
		<pre>
			<code class="js">
				module.exports = postcss.plugin('postcs-upside-down', function (opts) {
					return function (css, result) {
						css.walkRules(function(rule) {
							rule.selector = rule.selector + ', .hello';
						});
						css.walkDecls(function(decl) {
							if (decl.prop === 'width') {
								var comment = postcss.comment({text: 'Upside down!'});
								comment.source = decl.source; //for sourcemaps
								decl.prop = 'height';
								decl.parent.insertBefore(decl, comment);
							}
						});
					};
				});

			</code>
		</pre>
		<div class="lenta">¯\_(ツ)_/¯ </div>
	</div>
</section>


<section class="slide slide-log">
	<div>
		<h2>Как рассказать о важном?</h2>

		<pre><code class="js">console.log() //bad </code></pre>
		<ul>
			<li>невозможно контролировать</li>
			<li>не покажется в бразуере</li>
			<li>не по <a href="https://github.com/postcss/postcss/blob/master/docs/guidelines/plugin.md">гайдлайнам</a></li>
		</ul>
		<pre><code class="js">result.warn() //good!</code></pre>
		<ul>
			<li>можно выключать-включать-красить снаружи</li>
			<li>этот плагин – для ежа, этот плагин – для стрижа </li>
		</ul>

	</div>
</section>


<section class="slide">
	<div>
		<h2><a href="https://github.com/postcss/postcss/blob/master/docs/guidelines/plugin.md">Guidelines</a></h2>
		<ul>
			<li>модульность</li>
			<li>асинхронность</li>
			<li>node.clone() вместо postcss.decl() <a href="https://github.com/postcss/postcss/blob/master/docs/api.md#nodesource">(ссылка)</a></li>
			<li>тестирование</li>
			<li>документация</li>
			<li>логгирование</li>
		</ul>

	</div>
</section>

<section class="slide">
	<div>
		<h2>Ссылки</h2>
		<ul>
			<li><a href="https://github.com/stylecow/stylecow-core/wiki/The-AST">AST</a></li>
			<li><a href="https://github.com/postcss/postcss/blob/master/docs/api.md">postcss plugin API</a></li>
			<li><a href="https://github.com/postcss/postcss-plugin-boilerplate">postcss plugin boilerplate</a></li>
		</ul>

	</div>
</section>

<p class="badge"><a href="https://github.com/shower/shower">Fork me on Github</a></p>
<!--
	To hide progress bar from entire presentation
	just remove “progress” element.
	-->
<div class="progress">
	<div></div>
</div>
<script src="../node_modules/shower-core/shower.min.js"></script>
<script src="//cdn.jsdelivr.net/highlight.js/8.9.1/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<!-- Copyright © 2013 Yours Truly, Famous Inc. -->
</body>
</html>
